{"ast":null,"code":"var _jsxFileName = \"/Users/ekincare/Desktop/harish/liorel-react/src/pages/TagsPage.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Flex, Box } from \"rebass\";\nimport { Table, message, Button, Tag, Modal } from \"antd\";\nimport Api from \"../services/api\";\nimport TagModal from \"../../src/components/TagModal\";\n\nconst TagsPage = () => {\n  const [tags, updateTags] = useState(undefined);\n  const [openTagModal, toggleTagModal] = useState(false);\n  const [tag, updateTag] = useState(undefined);\n  const [sortedInfo, updateSortInfo] = useState(null);\n  useEffect(() => {\n    fetchTags();\n  }, []);\n\n  const fetchTags = () => {\n    Api.fetchTags({}, onTagsSuccess, onTagsFailure);\n  };\n\n  const onTagsSuccess = response => {\n    updateTags(response.data[\"tags\"]);\n  };\n\n  const onTagsFailure = error => {\n    message.error(\"Failed to fetch tags\");\n  };\n\n  const closeModal = () => {\n    toggleTagModal(false);\n    updateTag(undefined);\n  };\n\n  const onSaveTag = () => {\n    fetchTags();\n    closeModal();\n  };\n\n  const editTag = record => {\n    updateTag(record);\n    toggleTagModal(true);\n  };\n\n  const deleteTag = record => {\n    Modal.confirm({\n      icon: \"\",\n      title: \"Are you sure want to delete this tag?\",\n      content: Content(record),\n      onOk: () => onDeleteTag(record)\n    });\n  };\n\n  const Content = record => {\n    if (record[\"associated_users\"].length > 0) {\n      return /*#__PURE__*/React.createElement(Box, {\n        ml: \"-35px\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 9\n        }\n      }, \"This tag is associated with \", record[\"associated_users\"].length, \" users\");\n    }\n\n    return null;\n  };\n\n  const onDeleteTag = record => {\n    Api.deleteTag({\n      tagId: record[\"id\"]\n    }, onDeleteSuccess, onDeleteFailure);\n  };\n\n  const onDeleteSuccess = () => {\n    message.success(\"Successfully tag deleted\");\n    fetchTags();\n  };\n\n  const onDeleteFailure = error => {\n    if (error.response.data) {\n      message.error(error.response.data[\"message\"]);\n    } else {\n      message.error(\"Failed to delete tag\");\n    }\n  };\n\n  const handleChange = (pagination, filters, sorter) => {\n    updateSortInfo(sorter);\n  };\n\n  const columns = () => {\n    let list = [];\n    let sortInfo = sortedInfo || {};\n    list.push({\n      title: \"Name\",\n      dataIndex: \"name\",\n      key: \"name\",\n      sorter: (a, b) => String(a.name).localeCompare(String(b.name)),\n      sortOrder: sortInfo.columnKey === \"name\" && sortInfo.order\n    });\n    list.push({\n      title: \"Created at\",\n      dataIndex: \"created_at\",\n      key: \"created_at\",\n      sorter: (a, b) => new Date(b.created_at) - new Date(a.created_at),\n      sortOrder: sortInfo.columnKey === \"created_at\" && sortInfo.order,\n      render: created_at => {\n        let d = new Date(created_at);\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 11\n          }\n        }, d.getFullYear(), \"-\", d.getMonth(), \"-\", d.getDate(), \" \", d.getHours(), \":\", d.getMinutes());\n      }\n    });\n    list.push({\n      title: \"Updated at\",\n      dataIndex: \"updated_at\",\n      key: \"updated_at\",\n      sorter: (a, b) => new Date(b.updated_at) - new Date(a.updated_at),\n      sortOrder: sortInfo.columnKey === \"updated_at\" && sortInfo.order,\n      render: updated_at => {\n        let d = new Date(updated_at);\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 11\n          }\n        }, d.getFullYear(), \"-\", d.getMonth(), \"-\", d.getDate(), \" \", d.getHours(), \":\", d.getMinutes());\n      }\n    });\n    list.push({\n      title: \"Actions\",\n      render: record => {\n        return /*#__PURE__*/React.createElement(Flex, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          type: \"link\",\n          onClick: () => editTag(record),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }\n        }, \"Edit\"), /*#__PURE__*/React.createElement(Button, {\n          type: \"link\",\n          onClick: () => deleteTag(record),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }\n        }, \"Delete\"));\n      }\n    });\n    return list;\n  };\n\n  if (!tags) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Flex, {\n    mb: \"20px\",\n    justifyContent: \"flex-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    onClick: () => toggleTagModal(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, \"Add Tag\")), tags && /*#__PURE__*/React.createElement(Table, {\n    columns: columns(),\n    dataSource: tags,\n    pagination: false,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }), openTagModal && /*#__PURE__*/React.createElement(TagModal, {\n    tag: tag,\n    tags: tags,\n    closeModal: closeModal,\n    onSaveTag: onSaveTag,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default TagsPage;","map":{"version":3,"sources":["/Users/ekincare/Desktop/harish/liorel-react/src/pages/TagsPage.js"],"names":["React","useState","useEffect","Flex","Box","Table","message","Button","Tag","Modal","Api","TagModal","TagsPage","tags","updateTags","undefined","openTagModal","toggleTagModal","tag","updateTag","sortedInfo","updateSortInfo","fetchTags","onTagsSuccess","onTagsFailure","response","data","error","closeModal","onSaveTag","editTag","record","deleteTag","confirm","icon","title","content","Content","onOk","onDeleteTag","length","tagId","onDeleteSuccess","onDeleteFailure","success","handleChange","pagination","filters","sorter","columns","list","sortInfo","push","dataIndex","key","a","b","String","name","localeCompare","sortOrder","columnKey","order","Date","created_at","render","d","getFullYear","getMonth","getDate","getHours","getMinutes","updated_at"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Flex, Box } from \"rebass\";\nimport { Table, message, Button, Tag, Modal } from \"antd\";\nimport Api from \"../services/api\";\nimport TagModal from \"../../src/components/TagModal\";\n\nconst TagsPage = () => {\n  const [tags, updateTags] = useState(undefined);\n  const [openTagModal, toggleTagModal] = useState(false);\n  const [tag, updateTag] = useState(undefined);\n  const [sortedInfo, updateSortInfo] = useState(null);\n\n  useEffect(() => {\n    fetchTags();\n  }, []);\n\n  const fetchTags = () => {\n    Api.fetchTags({}, onTagsSuccess, onTagsFailure);\n  };\n\n  const onTagsSuccess = (response) => {\n    updateTags(response.data[\"tags\"]);\n  };\n\n  const onTagsFailure = (error) => {\n    message.error(\"Failed to fetch tags\");\n  };\n\n  const closeModal = () => {\n    toggleTagModal(false);\n    updateTag(undefined);\n  };\n\n  const onSaveTag = () => {\n    fetchTags();\n    closeModal();\n  };\n\n  const editTag = (record) => {\n    updateTag(record);\n    toggleTagModal(true);\n  };\n\n  const deleteTag = (record) => {\n    Modal.confirm({\n      icon: \"\",\n      title: \"Are you sure want to delete this tag?\",\n      content: Content(record),\n      onOk: () => onDeleteTag(record),\n    });\n  };\n\n  const Content = (record) => {\n    if (record[\"associated_users\"].length > 0) {\n      return (\n        <Box ml=\"-35px\">\n          This tag is associated with {record[\"associated_users\"].length} users\n        </Box>\n      );\n    }\n    return null;\n  };\n\n  const onDeleteTag = (record) => {\n    Api.deleteTag({ tagId: record[\"id\"] }, onDeleteSuccess, onDeleteFailure);\n  };\n\n  const onDeleteSuccess = () => {\n    message.success(\"Successfully tag deleted\");\n    fetchTags();\n  };\n\n  const onDeleteFailure = (error) => {\n    if (error.response.data) {\n      message.error(error.response.data[\"message\"]);\n    } else {\n      message.error(\"Failed to delete tag\");\n    }\n  };\n\n  const handleChange = (pagination, filters, sorter) => {\n    updateSortInfo(sorter);\n  };\n\n  const columns = () => {\n    let list = [];\n    let sortInfo = sortedInfo || {};\n    list.push({\n      title: \"Name\",\n      dataIndex: \"name\",\n      key: \"name\",\n      sorter: (a, b) => String(a.name).localeCompare(String(b.name)),\n      sortOrder: sortInfo.columnKey === \"name\" && sortInfo.order,\n    });\n    list.push({\n      title: \"Created at\",\n      dataIndex: \"created_at\",\n      key: \"created_at\",\n      sorter: (a, b) => new Date(b.created_at) - new Date(a.created_at),\n      sortOrder: sortInfo.columnKey === \"created_at\" && sortInfo.order,\n      render: (created_at) => {\n        let d = new Date(created_at);\n        return (\n          <p>\n            {d.getFullYear()}-{d.getMonth()}-{d.getDate()} {d.getHours()}:\n            {d.getMinutes()}\n          </p>\n        );\n      },\n    });\n    list.push({\n      title: \"Updated at\",\n      dataIndex: \"updated_at\",\n      key: \"updated_at\",\n      sorter: (a, b) => new Date(b.updated_at) - new Date(a.updated_at),\n      sortOrder: sortInfo.columnKey === \"updated_at\" && sortInfo.order,\n      render: (updated_at) => {\n        let d = new Date(updated_at);\n        return (\n          <p>\n            {d.getFullYear()}-{d.getMonth()}-{d.getDate()} {d.getHours()}:\n            {d.getMinutes()}\n          </p>\n        );\n      },\n    });\n    list.push({\n      title: \"Actions\",\n      render: (record) => {\n        return (\n          <Flex>\n            <Button type=\"link\" onClick={() => editTag(record)}>\n              Edit\n            </Button>\n            <Button type=\"link\" onClick={() => deleteTag(record)}>\n              Delete\n            </Button>\n          </Flex>\n        );\n      },\n    });\n    return list;\n  };\n\n  if (!tags) {\n    return null;\n  }\n\n  return (\n    <Box>\n      <Flex mb=\"20px\" justifyContent=\"flex-end\">\n        <Button type=\"primary\" onClick={() => toggleTagModal(true)}>\n          Add Tag\n        </Button>\n      </Flex>\n      {tags && (\n        <Table\n          columns={columns()}\n          dataSource={tags}\n          pagination={false}\n          onChange={handleChange}\n        />\n      )}\n      {openTagModal && (\n        <TagModal\n          tag={tag}\n          tags={tags}\n          closeModal={closeModal}\n          onSaveTag={onSaveTag}\n        />\n      )}\n    </Box>\n  );\n};\n\nexport default TagsPage;\n"]},"metadata":{},"sourceType":"module"}