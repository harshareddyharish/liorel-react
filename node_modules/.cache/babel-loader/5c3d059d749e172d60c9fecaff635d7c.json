{"ast":null,"code":"var _jsxFileName = \"/Users/ekincare/Desktop/harish/liorel-react/src/pages/LoginForm.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { storeToken, storeStaff, storePermissions } from \"../Auth\";\nimport { HOST } from \"../Url\";\nimport Form from \"antd/lib/form\";\nimport { Icon, Input, Button } from \"antd\";\nimport { Redirect } from \"react-router-dom\";\n\nclass LoginForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      this.props.form.validateFields((err, values) => {\n        if (!err) {\n          this.handleLogin(values.username, values.password);\n        }\n      });\n    };\n\n    this.state = {\n      loggedIn: false\n    };\n  }\n\n  handleLogin(email, password) {\n    let that = this;\n    axios.post(HOST + \"/sign_in\", {\n      email: email,\n      password: password\n    }).then(function (response) {\n      let key = response.headers[\"USER-TOKEN\"];\n\n      if (key !== undefined && key.length > 20) {\n        storeToken(response.headers[\"USER-TOKEN\"]);\n        storeStaff(\"USER_ID\", response.data[\"user\"][\"id\"]);\n        storeStaff(\"USER_NAME\", response.data[\"user\"][\"name\"]);\n        storeStaff(\"USER_EMAIL\", response.data[\"user\"][\"email\"]);\n        that.setState({\n          loggedIn: true\n        }, () => {\n          window.location.href = \"/users\";\n        });\n      }\n    }).catch(function (error) {\n      if (error.response) {\n        console.log(error.response.status);\n      }\n    });\n  }\n\n  renderForm() {\n    return /*#__PURE__*/React.createElement(Box, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      type: \"username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Input, {\n      type: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  render() {\n    if (this.state.loggedIn) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 14\n        }\n      });\n    } else {\n      return this.renderForm();\n    }\n  }\n\n}\n\nexport default LoginForm;","map":{"version":3,"sources":["/Users/ekincare/Desktop/harish/liorel-react/src/pages/LoginForm.js"],"names":["React","Component","axios","storeToken","storeStaff","storePermissions","HOST","Form","Icon","Input","Button","Redirect","LoginForm","constructor","props","handleSubmit","e","preventDefault","form","validateFields","err","values","handleLogin","username","password","state","loggedIn","email","that","post","then","response","key","headers","undefined","length","data","setState","window","location","href","catch","error","console","log","status","renderForm","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport {\n  storeToken,\n  storeStaff,\n  storePermissions\n} from \"../Auth\";\nimport { HOST } from \"../Url\";\nimport Form from \"antd/lib/form\";\nimport { Icon, Input, Button } from \"antd\";\nimport { Redirect } from \"react-router-dom\";\n\n\nclass LoginForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loggedIn: false };\n  }\n\n  handleLogin(email, password) {\n    let that = this;\n    axios\n      .post(HOST + \"/sign_in\", { email: email, password: password })\n      .then(function(response) {\n        let key = response.headers[\"USER-TOKEN\"];\n        if (key !== undefined && key.length > 20) {\n          storeToken(response.headers[\"USER-TOKEN\"]);\n          storeStaff(\"USER_ID\", response.data[\"user\"][\"id\"]);\n          storeStaff(\"USER_NAME\", response.data[\"user\"][\"name\"]);\n          storeStaff(\"USER_EMAIL\", response.data[\"user\"][\"email\"]);\n\n          that.setState({ loggedIn: true }, () => {\n            window.location.href = \"/users\";\n          });\n        }\n      })\n      .catch(function(error) {\n        if (error.response) {\n          console.log(error.response.status);\n        }\n      });\n  }\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        this.handleLogin(values.username, values.password);\n      }\n    });\n  };\n\n  renderForm() {\n    return(\n      <Box>\n        <Input type='username' />\n        <Input type='password' />\n      </Box>  \n    )\n  }\n\n  render() {\n    if (this.state.loggedIn) {\n      return <Redirect to={\"/\"} />;\n    } else {\n      return this.renderForm();\n    }\n  }\n}\n\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}