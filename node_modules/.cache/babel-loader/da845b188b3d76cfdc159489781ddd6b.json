{"ast":null,"code":"var _jsxFileName = \"/Users/ekincare/Desktop/harish/liorel-react/src/pages/LoginForm.js\";\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { storeToken, storeStaff } from \"../Auth\";\nimport { HOST } from \"../Url\";\nimport { Icon, Input, Button, message } from \"antd\";\nimport { Redirect } from \"react-router-dom\";\nimport { Box } from \"rebass\";\nimport Api from '../services/api';\n\nconst LoginForm = () => {\n  const [loggedIn, updateLoggedIn] = useState(false);\n  const [email, updateEmail] = useState(undefined);\n  const [password, updatePassword] = useState(undefined);\n\n  const handleLogin = () => {\n    Api.signIn({\n      data: {\n        email: email,\n        password: password\n      }\n    }, onSuccess, onFailure);\n  };\n\n  const onSuccess = response => {\n    let key = response.headers[\"USER-TOKEN\"];\n\n    if (key !== undefined && key.length > 20) {\n      storeToken(response.headers[\"USER-TOKEN\"]);\n      storeStaff(\"USER_ID\", response.data[\"user\"][\"id\"]);\n      storeStaff(\"USER_NAME\", response.data[\"user\"][\"name\"]);\n      storeStaff(\"USER_EMAIL\", response.data[\"user\"][\"email\"]);\n      updateLoggedIn(true);\n    }\n  };\n\n  const onFailure = error => {\n    if (error.data) {\n      message.error(error.data['message']);\n    }\n\n    console.log(error);\n  };\n\n  const handleSubmit = () => {\n    if (!email || !is_valid_email(email)) {\n      message.error('Enter valid email');\n      return;\n    } else if (!password || password.length < 6) {\n      message.error('Enter valid password');\n      return;\n    }\n\n    handleLogin();\n  };\n\n  const is_valid_email = email => {\n    return /^.+@.+\\..+$/.test(email);\n  };\n\n  const changeUserName = e => {\n    updateEmail(e.target.value);\n  };\n\n  const changePassword = e => {\n    updatePassword(e.target.value);\n  };\n\n  if (loggedIn) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/users\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(Box, {\n    px: \"20px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(Input, {\n    type: \"email\",\n    placeholder: \"email\",\n    onChange: changeUserName,\n    style: {\n      height: 45\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Input.Password, {\n    type: \"password\",\n    placeholder: \"password\",\n    onChange: changePassword,\n    style: {\n      height: 45\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    block: true,\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, \"Login\"));\n};\n\nexport default LoginForm;","map":{"version":3,"sources":["/Users/ekincare/Desktop/harish/liorel-react/src/pages/LoginForm.js"],"names":["React","useState","axios","storeToken","storeStaff","HOST","Icon","Input","Button","message","Redirect","Box","Api","LoginForm","loggedIn","updateLoggedIn","email","updateEmail","undefined","password","updatePassword","handleLogin","signIn","data","onSuccess","onFailure","response","key","headers","length","error","console","log","handleSubmit","is_valid_email","test","changeUserName","e","target","value","changePassword","height"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { storeToken, storeStaff } from \"../Auth\";\nimport { HOST } from \"../Url\";\nimport { Icon, Input, Button, message } from \"antd\";\nimport { Redirect } from \"react-router-dom\";\nimport { Box } from \"rebass\";\nimport Api from '../services/api';\n\nconst LoginForm = () => {\n  const [loggedIn, updateLoggedIn] = useState(false);\n  const [email, updateEmail] = useState(undefined);\n  const [password, updatePassword] = useState(undefined);\n\n  const handleLogin = () => {\n    Api.signIn({data: { email: email, password: password }}, onSuccess, onFailure)\n  }\n\n  const onSuccess = (response) => {\n    let key = response.headers[\"USER-TOKEN\"];\n    if (key !== undefined && key.length > 20) {\n      storeToken(response.headers[\"USER-TOKEN\"]);\n      storeStaff(\"USER_ID\", response.data[\"user\"][\"id\"]);\n      storeStaff(\"USER_NAME\", response.data[\"user\"][\"name\"]);\n      storeStaff(\"USER_EMAIL\", response.data[\"user\"][\"email\"]);\n      updateLoggedIn(true);\n    }\n  }\n\n  const onFailure = (error) => {\n    if (error.data) {\n      message.error(error.data['message'])\n    }\n    console.log(error);\n  }\n\n  const handleSubmit = () => {\n    if (!email || !is_valid_email(email)) {\n      message.error('Enter valid email')\n      return\n    }\n    else if (!password || password.length < 6) {\n      message.error('Enter valid password')\n      return\n    }\n    handleLogin()\n  };\n\n  const is_valid_email = (email) => { \n    return /^.+@.+\\..+$/.test(email); \n  }\n\n  const changeUserName = (e) => {\n    updateEmail(e.target.value);\n  };\n\n  const changePassword = (e) => {\n    updatePassword(e.target.value);\n  };\n\n  if (loggedIn) {\n    return <Redirect to={\"/users\"} />;\n  }\n\n  return (\n    <Box px=\"20px\">\n      <h2>Login</h2>\n      <Input\n        type=\"email\"\n        placeholder=\"email\"\n        onChange={changeUserName}\n        style={{ height: 45 }}\n      />\n      <br />\n      <br />\n      <Input.Password\n        type=\"password\"\n        placeholder=\"password\"\n        onChange={changePassword}\n        style={{ height: 45 }}\n      />\n      <br />\n      <br />\n      <Button type='primary' block onClick={handleSubmit}>Login</Button>\n    </Box>\n  );\n};\n\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}